### CONTRIBUTING.md

# CONTRIBUTING

貢献ありがとうございます。以下はこのリポジトリへ貢献するための手順、ルール、期待事項です。小さな修正でも大歓迎です。作業前に一読してください。

---

### 1. 基本的なワークフロー
1. リポジトリをフォークしてローカルにクローンする。  
2. main ブランチから新しいブランチを切る（例: feature/改善内容 または fix/問題番号）。  
   ```bash
   git checkout -b feature/your-short-description
   ```
3. 変更を小さく、目的をひとつに絞る。コミットは意味のある単位で行う。  
4. 必要なら単体で動作確認を行う（ローカルで py を実行、または onefile を再ビルドして動作確認）。  
5. リモートへ push して Pull Request を作成する。PR の説明には変更内容、動作確認手順、関連 issue（あれば）を記載する。

---

### 2. コード品質とスタイル
- Python: PEP8 に準拠することを目指してください。可能であれば flake8 や black を使って整形してください。  
- ドキュメント: 新しい機能や CLI/設定の変更は README.md や RELEASE_INSTRUCTIONS.md に追記してください。  
- テスト: 重要なロジック変更には再現手順または簡易テスト（スクリプト）を添えてください。

---

### 3. 依存関係の追加
- requirements.txt を更新してください。バージョンは互換性のある最小バージョンを明記する（例 Pillow>=10.0.0）。  
- 大きな外部バイナリ（pngquant 等）は可能ならリポジトリへ直接コミットせず、Git LFS を使うかリリース資産として管理してください。  
- 追加した依存がビルドサイズや配布に影響を与える場合は PR 説明で明記してください。

---

### 4. バイナリファイルの扱い
- 小さなユーティリティ（数百 KB）は tools/ に置くことがありますが、将来的な履歴肥大を避けるため大きいファイルは Git LFS に移行してください。  
- バイナリを追加する場合は LICENSE と配布許諾を確認し、PR の説明で出所とバージョンを記載してください。

---

### 5. セキュリティと機密情報
- API キー、PFX、アクセストークン、パスワードなどの機密情報をコミットしないでください。  
- CI 用のシークレットは GitHub Secrets や Azure Key Vault 等の安全なストアを使って管理してください。  
- 機密情報を誤ってコミットしてしまった場合は即座にトークンを無効化し、管理者へ連絡してください。

---

### 6. Issue と PR の書き方（簡易ガイド）
- Issue: 再現手順、期待される挙動、実際の挙動、OS/環境、該当リリースタグ、app_run.log の該当箇所を添付してください。テンプレートを用意しています（.github/ISSUE_TEMPLATE）。  
- PR: 変更点の要約、動作確認手順、関連 Issue 番号、差分のスクリーンショット（UI 変更時）を含めてください。

---

### 7. レビューとマージ
- レビューは少なくとも 1 名の承認を受けることを推奨します。セキュリティや大きな設計変更は追加のレビュアーを依頼してください。  
- CI（GitHub Actions）が成功することをマージ条件にしてください。ビルドやテストに失敗している場合はマージしないでください。

---

### 8. その他
- 貢献に関する質問や大きな設計提案は Issue を立てて議論してください。  
- 小さな改善（typo、ドキュメント修正等）は直接 PR を投げてください。

---

#### 連絡先
問題がある場合は GitHub Issues に詳細を投稿してください。PR や Issue には必ず再現手順とログを添えてください。

---

### .github/ISSUE_TEMPLATE/bug_report.md

---
name: Bug report
about: バグ報告テンプレート（必要な情報を迅速に集めるため）
title: '[BUG] '
labels: bug
assignees: ''
---

## 概要
バグの短い説明を入力してください。

## 再現手順
1. 実行環境（OS、OSバージョン）を記載  
2. 使用したリリースタグまたはコミットハッシュを記載（例: v1.0.0）  
3. 再現手順を箇条書きで詳述（例: ファイルを選んで圧縮→エラー発生）

## 期待される動作
何が期待されるかを記載してください。

## 実際の挙動
実際に何が起きたかを記載してください。エラーメッセージがあればその全文を貼ってください。

## ログと追加情報
- app_run.log（最後 200 行）を添付または貼付してください。  
- エラー時のコンソール出力（コンソールビルドでの出力）を貼ってください。  
- 再現に使ったサンプルファイル（可能な範囲で）を添付してください。

## 環境
- OS: Windows 10/11 等  
- Python: 3.12  
- 実行方法: ソース / リリース（dist\app.exe） を指定

---

### .github/ISSUE_TEMPLATE/feature_request.md

---
name: Feature request
about: 機能追加の提案テンプレート
title: '[Feature] '
labels: enhancement
assignees: ''
---

## 提案の概要
追加したい機能の短い説明を記載してください。

## 目的と利点
この機能があることで何が改善されるか、誰にとって有益かを記載してください。

## 想定する実装（任意）
実装方法のアイデア、UI の変更点、CLI オプションなどの具体案があれば記載してください。

## 代替案
もし完全な実装が難しい場合の軽量な代替案（例: オプションを追加する、外部ツールを組み合わせるなど）を記載してください。

## 参照
関連 Issue や他プロジェクトの実装例があればリンクしてください。